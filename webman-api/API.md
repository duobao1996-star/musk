# Webman API 2.0 æ¥å£æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [è®¤è¯æˆæƒ](#è®¤è¯æˆæƒ)
- [é€šç”¨è§„èŒƒ](#é€šç”¨è§„èŒƒ)
- [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
- [æ¥å£åˆ—è¡¨](#æ¥å£åˆ—è¡¨)
  - [è®¤è¯æ¥å£](#è®¤è¯æ¥å£)
  - [ç”¨æˆ·ç®¡ç†](#ç”¨æˆ·ç®¡ç†)
  - [è§’è‰²ç®¡ç†](#è§’è‰²ç®¡ç†)
  - [æƒé™ç®¡ç†](#æƒé™ç®¡ç†)
  - [æ“ä½œæ—¥å¿—](#æ“ä½œæ—¥å¿—)
  - [æ€§èƒ½ç›‘æ§](#æ€§èƒ½ç›‘æ§)
  - [è½¯åˆ é™¤ç®¡ç†](#è½¯åˆ é™¤ç®¡ç†)

---

## ğŸ“– é¡¹ç›®æ¦‚è¿°

### åŸºæœ¬ä¿¡æ¯

- **é¡¹ç›®åç§°**: Webman API 2.0 åç«¯ç³»ç»Ÿ
- **ç‰ˆæœ¬**: 2.0.0
- **æŠ€æœ¯æ ˆ**: PHP 8.2 + Webman 2.0 + MySQL 8.0 + Redis
- **æ¶æ„æ¨¡å¼**: å‰åç«¯åˆ†ç¦» + RESTful API
- **è®¤è¯æ–¹å¼**: JWT (JSON Web Token)

### æ ¸å¿ƒåŠŸèƒ½

- âœ… **ç”¨æˆ·è®¤è¯**: JWTä»¤ç‰Œè®¤è¯ã€ç™»å½•ç™»å‡º
- âœ… **ç”¨æˆ·ç®¡ç†**: ä»…ç®¡ç†å‘˜ç®¡ç†ï¼ˆå·²ç§»é™¤æ™®é€šç”¨æˆ·/å•†æˆ·/ä»£ç†ï¼‰
- âœ… **æƒé™æ§åˆ¶**: RBACè§’è‰²æƒé™ç³»ç»Ÿ
- âœ… **æ“ä½œå®¡è®¡**: å®Œæ•´çš„æ“ä½œæ—¥å¿—è®°å½•
- âœ… **æ€§èƒ½ç›‘æ§**: APIæ€§èƒ½æŒ‡æ ‡ç›‘æ§
- âœ… **è½¯åˆ é™¤**: æ•°æ®å®‰å…¨åˆ é™¤æœºåˆ¶

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- PHP >= 8.2
- MySQL >= 8.0
- Redis >= 6.0
- Composer

### å®‰è£…éƒ¨ç½²

```bash
# 1. å®‰è£…ä¾èµ–
composer install

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“å’ŒRedis

# 3. å¯åŠ¨æœåŠ¡
php start.php start
```

### æœåŠ¡åœ°å€

- **å¼€å‘ç¯å¢ƒ**: `http://127.0.0.1:8787`
- **APIåŸºç¡€è·¯å¾„**: `http://127.0.0.1:8787/api`

---

## ğŸ” è®¤è¯æˆæƒ

### JWTè®¤è¯

æ‰€æœ‰éœ€è¦è®¤è¯çš„æ¥å£éƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦JWTä»¤ç‰Œï¼š

```http
Authorization: Bearer <your_jwt_token>
```

### è·å–ä»¤ç‰Œ

é€šè¿‡ç™»å½•æ¥å£è·å–JWTä»¤ç‰Œï¼š

```http
POST /api/login
Content-Type: application/json

{
    "username": "admin",
    "password": "password123"
}
```

### ä»¤ç‰Œåˆ·æ–°

ä»¤ç‰Œå³å°†è¿‡æœŸæ—¶å¯ä»¥é€šè¿‡åˆ·æ–°æ¥å£è·å–æ–°ä»¤ç‰Œï¼š

```http
POST /api/refresh-token
Authorization: Bearer <current_token>
```

---

## ğŸ“ é€šç”¨è§„èŒƒ

### è¯·æ±‚æ ¼å¼

#### è¯·æ±‚å¤´

```http
Content-Type: application/json
Authorization: Bearer <token>  # éœ€è¦è®¤è¯çš„æ¥å£
X-CSRF-Token: <csrf_token>    # POST/PUT/DELETEè¯·æ±‚
```

#### è¯·æ±‚å‚æ•°

- **GETè¯·æ±‚**: å‚æ•°é€šè¿‡URLæŸ¥è¯¢å­—ç¬¦ä¸²ä¼ é€’
- **POST/PUTè¯·æ±‚**: å‚æ•°é€šè¿‡JSONæ ¼å¼ä¼ é€’
- **åˆ†é¡µå‚æ•°**: `page` (é¡µç ï¼Œé»˜è®¤1), `limit` (æ¯é¡µæ•°é‡ï¼Œé»˜è®¤15)

### å“åº”æ ¼å¼

#### æˆåŠŸå“åº”

```json
{
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ",
    "data": {
        // å“åº”æ•°æ®
    },
    "timestamp": 1640995200
}
```

#### åˆ†é¡µå“åº”

```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
        // æ•°æ®åˆ—è¡¨
    ],
    "pagination": {
        "total": 100,
        "page": 1,
        "limit": 15,
        "pages": 7
    },
    "timestamp": 1640995200
}
```

### HTTPçŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|----------|
| 200 | æˆåŠŸ | è¯·æ±‚æˆåŠŸå¤„ç† |
| 201 | åˆ›å»ºæˆåŠŸ | èµ„æºåˆ›å»ºæˆåŠŸ |
| 400 | è¯·æ±‚é”™è¯¯ | å‚æ•°éªŒè¯å¤±è´¥ |
| 401 | æœªè®¤è¯ | ä»¤ç‰Œæ— æ•ˆæˆ–è¿‡æœŸ |
| 403 | æƒé™ä¸è¶³ | æ²¡æœ‰è®¿é—®æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ |
| 422 | å‚æ•°é”™è¯¯ | ä¸šåŠ¡é€»è¾‘éªŒè¯å¤±è´¥ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | å†…éƒ¨æœåŠ¡å™¨é”™è¯¯ |

---

## âš ï¸ é”™è¯¯å¤„ç†

### é”™è¯¯å“åº”æ ¼å¼

```json
{
    "code": 400,
    "message": "å‚æ•°éªŒè¯å¤±è´¥",
    "data": {
        "errors": {
            "username": ["ç”¨æˆ·åä¸èƒ½ä¸ºç©º"],
            "email": ["é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"]
        }
    },
    "timestamp": 1640995200
}
```

### å¸¸è§é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼å’Œå†…å®¹ |
| 401 | è®¤è¯å¤±è´¥ | æ£€æŸ¥JWTä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆ |
| 403 | æƒé™ä¸è¶³ | ç¡®è®¤ç”¨æˆ·æ˜¯å¦æœ‰ç›¸åº”æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ | æ£€æŸ¥è¯·æ±‚çš„URLå’Œèµ„æºID |
| 422 | ä¸šåŠ¡é€»è¾‘é”™è¯¯ | æ£€æŸ¥ä¸šåŠ¡è§„åˆ™å’Œæ•°æ®çŠ¶æ€ |
| 429 | è¯·æ±‚é¢‘ç‡é™åˆ¶ | é™ä½è¯·æ±‚é¢‘ç‡ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

---

## ğŸ”— æ¥å£åˆ—è¡¨

## ğŸ”‘ è®¤è¯æ¥å£

### ç”¨æˆ·ç™»å½•

**æ¥å£åœ°å€**: `POST /api/login`

**æ¥å£æè¿°**: ç”¨æˆ·ç™»å½•è·å–JWTä»¤ç‰Œ

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å |
| password | string | æ˜¯ | å¯†ç  |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
    "username": "admin",
    "password": "password123"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "ç™»å½•æˆåŠŸ",
    "data": {
        "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
        "token_type": "bearer",
        "expires_in": 86400,
        "user": {
            "id": 1,
            "username": "admin",
            "email": "admin@example.com",
            "role_id": 1,
            "user_type": "admin"
        }
    },
    "timestamp": 1640995200
}
```


### è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/me`

**æ¥å£æè¿°**: è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯

**è¯·æ±‚å¤´**: éœ€è¦JWTè®¤è¯

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
        "id": 1,
        "username": "admin",
        "email": "admin@example.com",
        "role_id": 1,
        "role_name": "è¶…çº§ç®¡ç†å‘˜",
        "permissions": [
            "user.create",
            "user.update",
            "user.delete"
        ]
    },
    "timestamp": 1640995200
}
```

### åˆ·æ–°ä»¤ç‰Œ

**æ¥å£åœ°å€**: `POST /api/refresh-token`

**æ¥å£æè¿°**: åˆ·æ–°JWTä»¤ç‰Œ

**è¯·æ±‚å¤´**: éœ€è¦JWTè®¤è¯

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "ä»¤ç‰Œåˆ·æ–°æˆåŠŸ",
    "data": {
        "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
        "token_type": "bearer",
        "expires_in": 86400
    },
    "timestamp": 1640995200
}
```

### ç”¨æˆ·ç™»å‡º

**æ¥å£åœ°å€**: `POST /api/logout`

**æ¥å£æè¿°**: ç”¨æˆ·ç™»å‡º

**è¯·æ±‚å¤´**: éœ€è¦JWTè®¤è¯

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "ç™»å‡ºæˆåŠŸ",
    "data": null,
    "timestamp": 1640995200
}
```

---

## ğŸ‘¥ ç”¨æˆ·ç®¡ç†

### è·å–ç®¡ç†å‘˜åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/admin`

**æ¥å£æè¿°**: è·å–ç®¡ç†å‘˜åˆ—è¡¨

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| limit | integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤15 |
| search | string | å¦ | æœç´¢å…³é”®è¯ |
| status | integer | å¦ | çŠ¶æ€ç­›é€‰ (1-æ­£å¸¸, 0-ç¦ç”¨) |
| role_id | integer | å¦ | è§’è‰²IDç­›é€‰ |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
        {
            "id": 1,
            "username": "admin",
            "email": "admin@example.com",
            "role_id": 1,
            "role_name": "è¶…çº§ç®¡ç†å‘˜",
            "phone": "13800138000",
            "status": 1,
            "created_at": "2024-01-01 12:00:00",
            "updated_at": "2024-01-01 12:00:00"
        }
    ],
    "pagination": {
        "total": 10,
        "page": 1,
        "limit": 15,
        "pages": 1
    },
    "timestamp": 1640995200
}
```

### åˆ›å»ºç®¡ç†å‘˜

**æ¥å£åœ°å€**: `POST /api/admin`

**æ¥å£æè¿°**: åˆ›å»ºæ–°ç®¡ç†å‘˜

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å |
| email | string | æ˜¯ | é‚®ç®± |
| password | string | æ˜¯ | å¯†ç  |
| role_id | integer | æ˜¯ | è§’è‰²ID |
| phone | string | å¦ | æ‰‹æœºå· |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
    "username": "newadmin",
    "email": "newadmin@example.com",
    "password": "password123",
    "role_id": 2,
    "phone": "13800138001"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 201,
    "message": "ç®¡ç†å‘˜åˆ›å»ºæˆåŠŸ",
    "data": {
        "id": 2,
        "username": "newadmin",
        "email": "newadmin@example.com",
        "role_id": 2,
        "status": 1,
        "created_at": "2024-01-01 12:00:00"
    },
    "timestamp": 1640995200
}
```

### è·å–ç®¡ç†å‘˜è¯¦æƒ…

**æ¥å£åœ°å€**: `GET /api/admin/{id}`

**æ¥å£æè¿°**: è·å–æŒ‡å®šç®¡ç†å‘˜è¯¦æƒ…

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| id | integer | æ˜¯ | ç®¡ç†å‘˜ID |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
        "id": 1,
        "username": "admin",
        "email": "admin@example.com",
        "role_id": 1,
        "role_name": "è¶…çº§ç®¡ç†å‘˜",
        "phone": "13800138000",
        "status": 1,
        "created_at": "2024-01-01 12:00:00",
        "updated_at": "2024-01-01 12:00:00"
    },
    "timestamp": 1640995200
}
```

### æ›´æ–°ç®¡ç†å‘˜

**æ¥å£åœ°å€**: `PUT /api/admin/{id}`

**æ¥å£æè¿°**: æ›´æ–°ç®¡ç†å‘˜ä¿¡æ¯

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| username | string | å¦ | ç”¨æˆ·å |
| email | string | å¦ | é‚®ç®± |
| role_id | integer | å¦ | è§’è‰²ID |
| phone | string | å¦ | æ‰‹æœºå· |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "ç®¡ç†å‘˜æ›´æ–°æˆåŠŸ",
    "data": {
        "id": 1,
        "username": "admin",
        "email": "admin@example.com",
        "role_id": 1,
        "phone": "13800138000",
        "updated_at": "2024-01-01 12:30:00"
    },
    "timestamp": 1640995200
}
```

### åˆ é™¤ç®¡ç†å‘˜

**æ¥å£åœ°å€**: `DELETE /api/admin/{id}`

**æ¥å£æè¿°**: è½¯åˆ é™¤ç®¡ç†å‘˜

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "ç®¡ç†å‘˜åˆ é™¤æˆåŠŸ",
    "data": null,
    "timestamp": 1640995200
}
```

### é‡ç½®å¯†ç 

**æ¥å£åœ°å€**: `PUT /api/admin/{id}/reset-password`

**æ¥å£æè¿°**: é‡ç½®ç®¡ç†å‘˜å¯†ç 

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| password | string | æ˜¯ | æ–°å¯†ç  |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "å¯†ç é‡ç½®æˆåŠŸ",
    "data": null,
    "timestamp": 1640995200
}
```

### è·å–ç®¡ç†å‘˜ç»Ÿè®¡

**æ¥å£åœ°å€**: `GET /api/admin/stats`

**æ¥å£æè¿°**: è·å–ç®¡ç†å‘˜ç»Ÿè®¡ä¿¡æ¯

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
        "total": 10,
        "active": 8,
        "inactive": 2,
        "today_created": 1,
        "role_stats": [
            {
                "role_id": 1,
                "role_name": "è¶…çº§ç®¡ç†å‘˜",
                "count": 1
            }
        ]
    },
    "timestamp": 1640995200
}
```

---

## ğŸ·ï¸ è§’è‰²ç®¡ç†

### è·å–è§’è‰²åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/roles`

**æ¥å£æè¿°**: è·å–è§’è‰²åˆ—è¡¨

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| limit | integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤15 |
| search | string | å¦ | æœç´¢å…³é”®è¯ |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
        {
            "id": 1,
            "role_name": "è¶…çº§ç®¡ç†å‘˜",
            "description": "æ‹¥æœ‰æ‰€æœ‰æƒé™",
            "order_no": 1,
            "rights_count": 25,
            "users_count": 1,
            "created_at": "2024-01-01 12:00:00"
        }
    ],
    "pagination": {
        "total": 5,
        "page": 1,
        "limit": 15,
        "pages": 1
    },
    "timestamp": 1640995200
}
```

### åˆ›å»ºè§’è‰²

**æ¥å£åœ°å€**: `POST /api/roles`

**æ¥å£æè¿°**: åˆ›å»ºæ–°è§’è‰²

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| role_name | string | æ˜¯ | è§’è‰²åç§° |
| description | string | å¦ | è§’è‰²æè¿° |
| order_no | integer | å¦ | æ’åºå· |
| rights | array | å¦ | æƒé™IDæ•°ç»„ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
    "role_name": "ç¼–è¾‘å‘˜",
    "description": "å†…å®¹ç¼–è¾‘æƒé™",
    "order_no": 10,
    "rights": [1, 2, 3]
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 201,
    "message": "è§’è‰²åˆ›å»ºæˆåŠŸ",
    "data": {
        "id": 3,
        "role_name": "ç¼–è¾‘å‘˜",
        "description": "å†…å®¹ç¼–è¾‘æƒé™",
        "order_no": 10,
        "created_at": "2024-01-01 12:00:00"
    },
    "timestamp": 1640995200
}
```

### è·å–è§’è‰²è¯¦æƒ…

**æ¥å£åœ°å€**: `GET /api/roles/{id}`

**æ¥å£æè¿°**: è·å–æŒ‡å®šè§’è‰²è¯¦æƒ…

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
        "id": 1,
        "role_name": "è¶…çº§ç®¡ç†å‘˜",
        "description": "æ‹¥æœ‰æ‰€æœ‰æƒé™",
        "order_no": 1,
        "rights": [
            {
                "id": 1,
                "right_name": "ç”¨æˆ·ç®¡ç†",
                "description": "ç”¨æˆ·å¢åˆ æ”¹æŸ¥",
                "menu": 1
            }
        ],
        "created_at": "2024-01-01 12:00:00"
    },
    "timestamp": 1640995200
}
```

### æ›´æ–°è§’è‰²

**æ¥å£åœ°å€**: `PUT /api/roles/{id}`

**æ¥å£æè¿°**: æ›´æ–°è§’è‰²ä¿¡æ¯

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| role_name | string | å¦ | è§’è‰²åç§° |
| description | string | å¦ | è§’è‰²æè¿° |
| order_no | integer | å¦ | æ’åºå· |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è§’è‰²æ›´æ–°æˆåŠŸ",
    "data": {
        "id": 1,
        "role_name": "è¶…çº§ç®¡ç†å‘˜",
        "description": "æ‹¥æœ‰æ‰€æœ‰æƒé™",
        "order_no": 1,
        "updated_at": "2024-01-01 12:30:00"
    },
    "timestamp": 1640995200
}
```

### åˆ é™¤è§’è‰²

**æ¥å£åœ°å€**: `DELETE /api/roles/{id}`

**æ¥å£æè¿°**: è½¯åˆ é™¤è§’è‰²

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è§’è‰²åˆ é™¤æˆåŠŸ",
    "data": null,
    "timestamp": 1640995200
}
```

### è·å–è§’è‰²æƒé™

**æ¥å£åœ°å€**: `GET /api/roles/{id}/rights`

**æ¥å£æè¿°**: è·å–è§’è‰²æ‹¥æœ‰çš„æƒé™

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
        {
            "id": 1,
            "right_name": "ç”¨æˆ·ç®¡ç†",
            "description": "ç”¨æˆ·å¢åˆ æ”¹æŸ¥",
            "menu": 1,
            "sort": 1
        }
    ],
    "timestamp": 1640995200
}
```

### è®¾ç½®è§’è‰²æƒé™

**æ¥å£åœ°å€**: `POST /api/roles/{id}/rights`

**æ¥å£æè¿°**: è®¾ç½®è§’è‰²æƒé™

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| rights | array | æ˜¯ | æƒé™IDæ•°ç»„ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
    "rights": [1, 2, 3, 4, 5]
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "æƒé™è®¾ç½®æˆåŠŸ",
    "data": null,
    "timestamp": 1640995200
}
```

### è·å–æƒé™æ ‘

**æ¥å£åœ°å€**: `GET /api/roles/all-rights-tree`

**æ¥å£æè¿°**: è·å–æ‰€æœ‰æƒé™çš„æ ‘å½¢ç»“æ„

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
        {
            "id": 1,
            "right_name": "ç³»ç»Ÿç®¡ç†",
            "description": "ç³»ç»Ÿç®¡ç†æ¨¡å—",
            "menu": 1,
            "children": [
                {
                    "id": 2,
                    "right_name": "ç”¨æˆ·ç®¡ç†",
                    "description": "ç”¨æˆ·å¢åˆ æ”¹æŸ¥",
                    "menu": 1,
                    "children": []
                }
            ]
        }
    ],
    "timestamp": 1640995200
}
```

---

## ğŸ”’ æƒé™ç®¡ç†

### è·å–æƒé™åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/permissions`

**æ¥å£æè¿°**: è·å–æƒé™åˆ—è¡¨

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| limit | integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤15 |
| menu | integer | å¦ | æ˜¯å¦èœå•æƒé™ (1-æ˜¯, 0-å¦) |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
        {
            "id": 1,
            "right_name": "ç”¨æˆ·ç®¡ç†",
            "description": "ç”¨æˆ·å¢åˆ æ”¹æŸ¥",
            "menu": 1,
            "sort": 1,
            "icon": "user",
            "created_at": "2024-01-01 12:00:00"
        }
    ],
    "pagination": {
        "total": 25,
        "page": 1,
        "limit": 15,
        "pages": 2
    },
    "timestamp": 1640995200
}
```

### åˆ›å»ºæƒé™

**æ¥å£åœ°å€**: `POST /api/permissions`

**æ¥å£æè¿°**: åˆ›å»ºæ–°æƒé™

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| pid | integer | å¦ | çˆ¶çº§æƒé™ID |
| right_name | string | æ˜¯ | æƒé™åç§° |
| description | string | å¦ | æƒé™æè¿° |
| menu | integer | å¦ | æ˜¯å¦èœå• (1-æ˜¯, 0-å¦) |
| sort | integer | å¦ | æ’åºå· |
| icon | string | å¦ | å›¾æ ‡ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
    "pid": 0,
    "right_name": "å•†å“ç®¡ç†",
    "description": "å•†å“å¢åˆ æ”¹æŸ¥",
    "menu": 1,
    "sort": 10,
    "icon": "goods"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 201,
    "message": "æƒé™åˆ›å»ºæˆåŠŸ",
    "data": {
        "id": 26,
        "pid": 0,
        "right_name": "å•†å“ç®¡ç†",
        "description": "å•†å“å¢åˆ æ”¹æŸ¥",
        "menu": 1,
        "sort": 10,
        "icon": "goods",
        "created_at": "2024-01-01 12:00:00"
    },
    "timestamp": 1640995200
}
```

### è·å–æƒé™æ ‘

**æ¥å£åœ°å€**: `GET /api/permissions/tree`

**æ¥å£æè¿°**: è·å–æƒé™æ ‘å½¢ç»“æ„

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
        {
            "id": 1,
            "right_name": "ç³»ç»Ÿç®¡ç†",
            "description": "ç³»ç»Ÿç®¡ç†æ¨¡å—",
            "menu": 1,
            "children": [
                {
                    "id": 2,
                    "right_name": "ç”¨æˆ·ç®¡ç†",
                    "description": "ç”¨æˆ·å¢åˆ æ”¹æŸ¥",
                    "menu": 1,
                    "children": []
                }
            ]
        }
    ],
    "timestamp": 1640995200
}
```

### è·å–èœå•æƒé™

**æ¥å£åœ°å€**: `GET /api/permissions/menu`

**æ¥å£æè¿°**: è·å–èœå•æƒé™åˆ—è¡¨

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
        {
            "id": 1,
            "right_name": "ç³»ç»Ÿç®¡ç†",
            "description": "ç³»ç»Ÿç®¡ç†æ¨¡å—",
            "icon": "system",
            "sort": 1,
            "children": [
                {
                    "id": 2,
                    "right_name": "ç”¨æˆ·ç®¡ç†",
                    "description": "ç”¨æˆ·å¢åˆ æ”¹æŸ¥",
                    "icon": "user",
                    "sort": 1
                }
            ]
        }
    ],
    "timestamp": 1640995200
}
```

---

## ğŸ“Š æ“ä½œæ—¥å¿—

### è·å–æ“ä½œæ—¥å¿—åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/operation-logs`

**æ¥å£æè¿°**: è·å–æ“ä½œæ—¥å¿—åˆ—è¡¨

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| limit | integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤15 |
| admin_id | integer | å¦ | ç®¡ç†å‘˜ID |
| operation_type | string | å¦ | æ“ä½œç±»å‹ |
| start_time | string | å¦ | å¼€å§‹æ—¶é—´ (Y-m-d H:i:s) |
| end_time | string | å¦ | ç»“æŸæ—¶é—´ (Y-m-d H:i:s) |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
        {
            "id": 1,
            "admin_id": 1,
            "admin_name": "admin",
            "operation_type": "login",
            "operation_module": "auth",
            "operation_desc": "ç™»å½•æˆåŠŸ",
            "request_url": "/api/login",
            "request_method": "POST",
            "ip_address": "127.0.0.1",
            "status": 1,
            "operation_time": "2024-01-01 12:00:00"
        }
    ],
    "pagination": {
        "total": 100,
        "page": 1,
        "limit": 15,
        "pages": 7
    },
    "timestamp": 1640995200
}
```

### è·å–æ—¥å¿—ç»Ÿè®¡

**æ¥å£åœ°å€**: `GET /api/operation-logs/stats`

**æ¥å£æè¿°**: è·å–æ“ä½œæ—¥å¿—ç»Ÿè®¡ä¿¡æ¯

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| start_time | string | å¦ | å¼€å§‹æ—¶é—´ |
| end_time | string | å¦ | ç»“æŸæ—¶é—´ |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
        "total_operations": 1000,
        "success_operations": 950,
        "failed_operations": 50,
        "today_operations": 50,
        "type_stats": [
            {
                "operation_type": "login",
                "count": 100
            }
        ],
        "module_stats": [
            {
                "operation_module": "auth",
                "count": 150
            }
        ]
    },
    "timestamp": 1640995200
}
```

### æ¸…ç†æ—¥å¿—

**æ¥å£åœ°å€**: `POST /api/operation-logs/cleanup`

**æ¥å£æè¿°**: æ¸…ç†è¿‡æœŸæ—¥å¿—

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| days | integer | æ˜¯ | ä¿ç•™å¤©æ•° |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
    "days": 30
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "æ—¥å¿—æ¸…ç†æˆåŠŸ",
    "data": {
        "deleted_count": 500
    },
    "timestamp": 1640995200
}
```

---

## âš¡ æ€§èƒ½ç›‘æ§

### è·å–æ€§èƒ½ç»Ÿè®¡

**æ¥å£åœ°å€**: `GET /api/performance/stats`

**æ¥å£æè¿°**: è·å–æ€§èƒ½ç»Ÿè®¡ä¿¡æ¯

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| days | integer | å¦ | ç»Ÿè®¡å¤©æ•°ï¼Œé»˜è®¤7 |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
        "total_requests": 10000,
        "avg_response_time": 150.5,
        "max_response_time": 2000.0,
        "avg_memory_usage": 1024.5,
        "max_memory_usage": 2048.0,
        "error_count": 50,
        "active_users": 100,
        "unique_ips": 50
    },
    "timestamp": 1640995200
}
```

### è·å–æ…¢æŸ¥è¯¢

**æ¥å£åœ°å€**: `GET /api/performance/slow-queries`

**æ¥å£æè¿°**: è·å–æ…¢æŸ¥è¯¢åˆ—è¡¨

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| threshold | integer | å¦ | æ…¢æŸ¥è¯¢é˜ˆå€¼(æ¯«ç§’)ï¼Œé»˜è®¤1000 |
| limit | integer | å¦ | è¿”å›æ•°é‡ï¼Œé»˜è®¤20 |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
        "slow_queries": [
            {
                "endpoint": "/api/users",
                "method": "GET",
                "response_time": 1500.0,
                "memory_usage": 2048.0,
                "created_at": "2024-01-01 12:00:00"
            }
        ],
        "threshold": 1000,
        "count": 5
    },
    "timestamp": 1640995200
}
```

---

## ğŸ—‘ï¸ è½¯åˆ é™¤ç®¡ç†

### è·å–å·²åˆ é™¤æ•°æ®åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/soft-delete/{type}`

**æ¥å£æè¿°**: è·å–å·²è½¯åˆ é™¤çš„æ•°æ®åˆ—è¡¨

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| type | string | æ˜¯ | æ•°æ®ç±»å‹ (admins/rights/logs) |

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| limit | integer | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤15 |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": [
        {
            "id": 1,
            "username": "deleted_user",
            "email": "deleted@example.com",
            "delete_time": "2024-01-01 12:00:00"
        }
    ],
    "pagination": {
        "total": 5,
        "page": 1,
        "limit": 15,
        "pages": 1
    },
    "timestamp": 1640995200
}
```

### æ¢å¤æ•°æ®

**æ¥å£åœ°å€**: `POST /api/soft-delete/restore/{type}`

**æ¥å£æè¿°**: æ¢å¤è½¯åˆ é™¤çš„æ•°æ®

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| id | integer | æ˜¯ | æ•°æ®ID |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
    "id": 1
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "æ¢å¤æˆåŠŸ",
    "data": null,
    "timestamp": 1640995200
}
```

### æ°¸ä¹…åˆ é™¤æ•°æ®

**æ¥å£åœ°å€**: `POST /api/soft-delete/force-delete/{type}`

**æ¥å£æè¿°**: æ°¸ä¹…åˆ é™¤æ•°æ®

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| id | integer | æ˜¯ | æ•°æ®ID |

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "æ°¸ä¹…åˆ é™¤æˆåŠŸ",
    "data": null,
    "timestamp": 1640995200
}
```

### æ¸…ç†è½¯åˆ é™¤æ•°æ®

**æ¥å£åœ°å€**: `POST /api/soft-delete/cleanup`

**æ¥å£æè¿°**: æ¸…ç†è¿‡æœŸçš„è½¯åˆ é™¤æ•°æ®

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| days | integer | æ˜¯ | æ¸…ç†å¤©æ•° |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
    "days": 7
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
    "code": 200,
    "message": "æ¸…ç†å®Œæˆ",
    "data": {
        "log_cleaned": 10,
        "performance_cleaned": 5,
        "days": 7
    },
    "timestamp": 1640995200
}
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼

- **é¡¹ç›®ä»“åº“**: [GitHub Repository]
- **æŠ€æœ¯æ–‡æ¡£**: [Documentation]
- **é—®é¢˜åé¦ˆ**: [Issues]

### æ›´æ–°æ—¥å¿—

è¯¦ç»†çš„æ›´æ–°æ—¥å¿—è¯·å‚è€ƒ [CHANGELOG.md](./CHANGELOG.md)

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](./LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

---

*æœ€åæ›´æ–°: 2024-01-01*